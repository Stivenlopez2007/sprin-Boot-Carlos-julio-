{
    "Grupo 1": [
        {
            "x": 72,
            "y": 98,
            "height": 200,
            "width": 250,
            "color": "yellow",
            "title": "",
            "text": "/ --- Televisor ---\nTelevisor tv1 = new Televisor();\ntv1.mostrar();\ntv1.color = \"Negro\";\ntv1.marca = \"Samsung\";\ntv1.tama\u00f1o = \"50 pulgadas\";\ntv1.precio = 1800000;\n\nTelevisor tv2 = new Televisor();\ntv2.mostrar();\ntv2.color = \"Gris\";\ntv2.marca = \"LG\";\ntv2.tama\u00f1o = \"32 pulgadas\";\ntv2.precio = 950000;\n\n\n// --- Mesa ---\nMesa mesa1 = new Mesa();\nmesa1.mostrar();\n\nmesa1.material = \"Madera\";\nmesa1.color = \"Caf\u00e9\";\nmesa1.altura = 80;\nmesa1.forma = \"Rectangular\";\n\nMesa mesa2 = new Mesa();\nmesa2.mostrar();\nmesa2.material = \"Vidrio\";\nmesa2.color = \"Transparente\";\nmesa2.altura = 75;\nmesa2.forma = \"Redonda\";\n\n\n// --- Bolso ---\nBolso bolso1 = new Bolso();\nbolso1.mostrar();\nbolso1.material = \"Cuero\";\nbolso1.color = \"Negro\";\nbolso1.tama\u00f1o = \"Mediano\";\nbolso1.cierre = \"Cremallera\";\n\nBolso bolso2 = new Bolso();\nbolso2.mostrar();\nbolso2.material = \"Tela\";\nbolso2.color = \"Rojo\";\nbolso2.tama\u00f1o = \"Grande\";\nbolso2.cierre = \"Broche\";\n\n\n// --- Persona ---\nPersona persona1 = new Persona();\npersona1.mostrar();\npersona1.nombre = \"Laura\";\npersona1.edad = 25;\npersona1.altura = 1.68;\npersona1.genero = \"Femenino\";\n\n\nPersona persona2 = new Persona();\npersona2.mostrar();\npersona2.nombre = \"Carlos\";\npersona2.edad = 30;\npersona2.altura = 1.80;\npersona2.genero = \"Masculino\";\n\n\n// --- Silla ---\nSilla silla1 = new Silla();\nsilla1.mostrar();\nsilla1.material = \"Pl\u00e1stico\";\nsilla1.color = \"Blanco\";\nsilla1.altura = 1.0;\nsilla1.tipo = \"De comedor\";\n\nSilla silla2 = new Silla();\nsilla2.mostrar();\nsilla2.material = \"Madera\";\nsilla2.color = \"Caf\u00e9\";\nsilla2.altura = 1.2;\nsilla2.tipo = \"De oficina\";\n\n\n// --- Cartera ---\nCartera cartera1 = new Cartera();\ncartera1.mostrar();\ncartera1.color = \"Rosada\";\ncartera1.estilo = \"Casual\";\ncartera1.material = \"Cuero\";\n\n\nCartera cartera2 = new Cartera();\ncartera2.mostrar();\ncartera2.color = \"Negra\";\ncartera2.estilo = \"Formal\";\ncartera2.material = \"Sint\u00e9tico\";\n\n\n// --- Maleta ---\nMaleta maleta1 = new Maleta();\nmaleta1.mostrar();\nmaleta1.color = \"Azul\";\nmaleta1.capacidad = \"35 litros\";\nmaleta1.tipo = \"Viaje\";\n\n\nMaleta maleta2 = new Maleta();\nmaleta2.mostrar();\nmaleta2.color = \"Roja\";\nmaleta2.capacidad = \"20 litros\";\nmaleta2.tipo = \"Mano\";\n\n\n// --- Celular ---\nCelular celular1 = new Celular();\ncelular1.mostrar();\ncelular1.marca = \"Apple\";\ncelular1.modelo = \"iPhone 14\";\ncelular1.color = \"Negro\";\ncelular1.almacenamiento = \"128GB\";\n\n\nCelular celular2 = new Celular();\ncelular2.mostrar();\ncelular2.marca = \"Samsung\";\ncelular2.modelo = \"Galaxy S22\";\ncelular2.color = \"Plata\";\ncelular2.almacenamiento = \"256GB\";\n\n\n// --- Computador ---\nComputador compu1 = new Computador();\ncompu1.mostrar();\ncompu1.marca = \"HP\";\ncompu1.memoriaRAM = \"16GB\";\ncompu1.almacenamiento = \"512GB SSD\";\ncompu1.color = \"Gris\";\n\n\nComputador compu2 = new Computador();\ncompu2.mostrar();\ncompu2.marca = \"Asus\";\ncompu2.memoriaRAM = \"8GB\";\ncompu2.almacenamiento = \"1TB HDD\";\ncompu2.color = \"Negro\";\n\n"
        },
        {
            "x": 20,
            "y": 20,
            "height": 200,
            "width": 250,
            "color": "yellow",
            "title": "",
            "text": "bibliotecas \nbase de datos trabajaremos hot \nprimera evidencia analisis bibliometrico\npatorn boleano una busqueda mas especifica "
        }
    ],
    "proyecto_informacion": [
        {
            "x": 20,
            "y": 20,
            "height": 200,
            "width": 330,
            "color": "yellow",
            "title": "link para figma ",
            "text": "iconos \n#tag:link:https://www.figma.com/community/file/1284132410348416802#tag:link:\n\n#tag:link:https://www.figma.com/community/file/931906394678748246#tag:link:\n\n#tag:link:https://www.figma.com/community/file/1284132410348416802#tag:link:\n\n#tag:link:https://www.figma.com/community/file/948657233132342302#tag:link:\n\n#tag:link:https://www.figma.com/community/file/1083076893071963439#tag:link:\n\n#tag:link:https://www.figma.com/community/file/1132885715251744624#tag:link:\n\nSMART HOME\n#tag:link:https://www.figma.com/community/file/1302160829569236690#tag:link:\n\n#tag:link:https://www.figma.com/community/file/1302160829569236690#tag:link:\n\n#tag:link:https://www.figma.com/community/file/1535158602428621911#tag:link:\n"
        },
        {
            "x": 40,
            "y": 80,
            "height": 442,
            "width": 1182,
            "color": "yellow",
            "title": "DB - CONCESIONARIO",
            "text": "\n-- BASE DE DATOS CONCESIONARIO DE VEH\u00cdCULOS\n-- Aplicando Primera, Segunda y Tercera Forma Normal\n\n-- PRIMERA FORMA NORMAL (1FN)\n-- Criterios aplicados:\n-- 1. Cada campo contiene valores at\u00f3micos (no divisibles)\n-- 2. No hay grupos repetitivos\n-- 3. Cada tabla tiene una clave primaria\n-- 4. No hay campos multivaluados\n\n-- CAT\u00c1LOGOS Y ENTIDADES BASE\n\n\n-- Tabla: Marca\nCREATE TABLE Marca (\n    id_marca INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_marca VARCHAR(50) NOT NULL UNIQUE,\n    pais_origen VARCHAR(50),\n    sitio_web VARCHAR(100)\n);\n\n-- Tabla: Tipo_Vehiculo\nCREATE TABLE Tipo_Vehiculo (\n    id_tipo INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_tipo VARCHAR(30) NOT NULL UNIQUE,\n    descripcion VARCHAR(200)\n);\n\n-- Tabla: Tipo_Combustible\nCREATE TABLE Tipo_Combustible (\n    id_combustible INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_combustible VARCHAR(20) NOT NULL UNIQUE,\n    descripcion VARCHAR(100),\n    es_ecologico BOOLEAN DEFAULT FALSE\n);\n\n\n-- SEGUNDA FORMA NORMAL \n-- Criterios aplicados:\n-- 1. Cumple con 1FN\n-- 2. Todos los atributos no clave dependen completamente de la clave primaria\n-- 3. Se eliminan dependencias parciales\n-- Tabla: Modelo (2FN - depende completamente de id_modelo)\n\n\nCREATE TABLE Modelo (\n    id_modelo INT PRIMARY KEY AUTO_INCREMENT,\n    id_marca INT NOT NULL,\n    id_tipo INT NOT NULL,\n    id_combustible INT NOT NULL,\n    nombre_modelo VARCHAR(50) NOT NULL,\n    capacidad_pasajeros INT,\n    a\u00f1o_inicio_produccion INT,\n    a\u00f1o_fin_produccion INT,\n    FOREIGN KEY (id_marca) REFERENCES Marca(id_marca),\n    FOREIGN KEY (id_tipo) REFERENCES Tipo_Vehiculo(id_tipo),\n    FOREIGN KEY (id_combustible) REFERENCES Tipo_Combustible(id_combustible),\n    UNIQUE KEY (id_marca, nombre_modelo)\n);\n\n-- TERCERA FORMA NORMAL \n-- Criterios aplicados:\n-- 1. Cumple con 2FN\n-- 2. No existen dependencias transitivas\n-- 3. Todos los atributos no clave dependen SOLO de la clave primaria\n-- Tabla: Color (3FN - separada para evitar dependencia transitiva)\n\nCREATE TABLE Color (\n    id_color INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_color VARCHAR(30) NOT NULL UNIQUE,\n    codigo_hex VARCHAR(7),\n    es_metalizado BOOLEAN DEFAULT FALSE,\n    costo_adicional DECIMAL(10,2) DEFAULT 0.00\n);\n\n-- Tabla: Estado_Carro (3FN - cat\u00e1logo independiente)\nCREATE TABLE Estado_Carro (\n    id_estado INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_estado VARCHAR(20) NOT NULL UNIQUE,\n    descripcion VARCHAR(100)\n);\n\n\n-- ENTIDADES DE CLIENTES\n\n-- Tabla: Cliente (3FN)\nCREATE TABLE Cliente (\n    id_cliente INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(50) NOT NULL,\n    apellido VARCHAR(50) NOT NULL,\n    dni VARCHAR(20) NOT NULL UNIQUE,\n    telefono VARCHAR(15),\n    email VARCHAR(100) UNIQUE,\n    fecha_registro DATE DEFAULT CURRENT_DATE,\n    INDEX idx_dni (dni),\n    INDEX idx_email (email)\n);\n\n-- Tabla: Cliente_Direccion (3FN - relaci\u00f3n 1:N)\nCREATE TABLE Cliente_Direccion (\n    id_direccion INT PRIMARY KEY AUTO_INCREMENT,\n    id_cliente INT NOT NULL,\n    tipo_via VARCHAR(20),\n    numero_via VARCHAR(10),\n    numero_predio VARCHAR(10),\n    complemento VARCHAR(50),\n    barrio VARCHAR(50),\n    ciudad VARCHAR(50) NOT NULL,\n    departamento VARCHAR(50) NOT NULL,\n    codigo_postal VARCHAR(10),\n    es_principal BOOLEAN DEFAULT FALSE,\n    FOREIGN KEY (id_cliente) REFERENCES Cliente(id_cliente) ON DELETE CASCADE,\n    INDEX idx_cliente (id_cliente)\n);\n\n-- ENTIDADES DE VENDEDORES\n\n-- Tabla: Vendedor (3FN)\nCREATE TABLE Vendedor (\n    id_vendedor INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(50) NOT NULL,\n    apellido VARCHAR(50) NOT NULL,\n    dni VARCHAR(20) NOT NULL UNIQUE,\n    telefono VARCHAR(15),\n    email VARCHAR(100) UNIQUE,\n    fecha_contratacion DATE DEFAULT CURRENT_DATE,\n    comision_porcentaje DECIMAL(5,2) DEFAULT 0.00,\n    estado VARCHAR(10) DEFAULT 'ACTIVO',\n    CHECK (estado IN ('ACTIVO', 'INACTIVO', 'SUSPENDIDO')),\n    INDEX idx_estado (estado)\n);\n\n\n-- ENTIDADES DE CONCESIONARIOS\n\n\n-- Tabla: Concesionario (3FN)\nCREATE TABLE Concesionario (\n    id_concesionario INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(100) NOT NULL UNIQUE,\n    ciudad VARCHAR(50) NOT NULL,\n    telefono VARCHAR(15),\n    gerente VARCHAR(100),\n    email VARCHAR(100)\n);\n\n-- Tabla: Concesionario_Direccion (3FN - relaci\u00f3n 1:N)\nCREATE TABLE Concesionario_Direccion (\n    id_direccion INT PRIMARY KEY AUTO_INCREMENT,\n    id_concesionario INT NOT NULL,\n    tipo_via VARCHAR(20),\n    numero_via VARCHAR(10),\n    numero_predio VARCHAR(10),\n    barrio VARCHAR(50),\n    ciudad VARCHAR(50) NOT NULL,\n    departamento VARCHAR(50) NOT NULL,\n    referencia VARCHAR(200),\n    FOREIGN KEY (id_concesionario) REFERENCES Concesionario(id_concesionario) ON DELETE CASCADE\n);\n\n\n-- ENTIDADES DE VEH\u00cdCULO\n\n\n-- Tabla: Carro (3FN)\nCREATE TABLE Carro (\n    id_carro INT PRIMARY KEY AUTO_INCREMENT,\n    vin VARCHAR(17) NOT NULL UNIQUE,\n    id_modelo INT NOT NULL,\n    id_concesionario INT NOT NULL,\n    id_estado INT NOT NULL,\n    a\u00f1o INT NOT NULL,\n    color VARCHAR(30) NOT NULL,\n    kilometraje INT DEFAULT 0,\n    precio DECIMAL(12,2) NOT NULL,\n    fecha_ingreso DATE DEFAULT CURRENT_DATE,\n    disponible BOOLEAN DEFAULT TRUE,\n    FOREIGN KEY (id_modelo) REFERENCES Modelo(id_modelo),\n    FOREIGN KEY (id_concesionario) REFERENCES Concesionario(id_concesionario),\n    FOREIGN KEY (id_estado) REFERENCES Estado_Carro(id_estado),\n    INDEX idx_vin (vin),\n    INDEX idx_disponible (disponible),\n    INDEX idx_modelo (id_modelo)\n);\n\n-- Tabla: Tipo_Dato (3FN - para caracter\u00edsticas din\u00e1micas)\nCREATE TABLE Tipo_Dato (\n    id_tipo_dato INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_tipo VARCHAR(20) NOT NULL UNIQUE,\n    formato_validacion VARCHAR(100)\n);\n\n-- Tabla: Caracteristica (3FN)\nCREATE TABLE Caracteristica (\n    id_caracteristica INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_caracteristica VARCHAR(100) NOT NULL UNIQUE,\n    id_tipo_dato INT NOT NULL,\n    descripcion TEXT,\n    unidad_medida VARCHAR(20),\n    aplica_comparacion BOOLEAN DEFAULT TRUE,\n    FOREIGN KEY (id_tipo_dato) REFERENCES Tipo_Dato(id_tipo_dato)\n);\n\n-- Tabla: Carro_Caracteristica (3FN - relaci\u00f3n N:M)\nCREATE TABLE Carro_Caracteristica (\n    id_carro_caracteristica INT PRIMARY KEY AUTO_INCREMENT,\n    id_carro INT NOT NULL,\n    id_caracteristica INT NOT NULL,\n    valor VARCHAR(200) NOT NULL,\n    fecha_registro DATE DEFAULT CURRENT_DATE,\n    FOREIGN KEY (id_carro) REFERENCES Carro(id_carro) ON DELETE CASCADE,\n    FOREIGN KEY (id_caracteristica) REFERENCES Caracteristica(id_caracteristica),\n    UNIQUE KEY (id_carro, id_caracteristica)\n);\n\n-- Tabla: Historial_Precio_Carro (3FN - auditor\u00eda)\nCREATE TABLE Historial_Precio_Carro (\n    id_historial INT PRIMARY KEY AUTO_INCREMENT,\n    id_carro INT NOT NULL,\n    precio_anterior DECIMAL(12,2) NOT NULL,\n    precio_nuevo DECIMAL(12,2) NOT NULL,\n    fecha_cambio DATETIME DEFAULT CURRENT_TIMESTAMP,\n    motivo VARCHAR(200),\n    usuario VARCHAR(50),\n    porcentaje_cambio DECIMAL(6,2),\n    FOREIGN KEY (id_carro) REFERENCES Carro(id_carro) ON DELETE CASCADE,\n    INDEX idx_carro_fecha (id_carro, fecha_cambio)\n);\n\n\n-- ENTIDADES DE VENTAS\n\n\n-- Tabla: Metodo_Pago (3FN)\nCREATE TABLE Metodo_Pago (\n    id_metodo INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_metodo VARCHAR(30) NOT NULL UNIQUE,\n    requiere_aprobacion BOOLEAN DEFAULT FALSE,\n    activo BOOLEAN DEFAULT TRUE\n);\n\n-- Tabla: Venta (3FN)\nCREATE TABLE Venta (\n    id_venta INT PRIMARY KEY AUTO_INCREMENT,\n    id_cliente INT NOT NULL,\n    id_vendedor INT NOT NULL,\n    id_carro INT NOT NULL,\n    fecha_venta DATE DEFAULT CURRENT_DATE,\n    precio_carro DECIMAL(12,2) NOT NULL,\n    descuento_aplicado DECIMAL(12,2) DEFAULT 0.00,\n    total_accesorios DECIMAL(12,2) DEFAULT 0.00,\n    precio_final DECIMAL(12,2) NOT NULL,\n    tiene_financiamiento BOOLEAN DEFAULT FALSE,\n    observaciones TEXT,\n    FOREIGN KEY (id_cliente) REFERENCES Cliente(id_cliente),\n    FOREIGN KEY (id_vendedor) REFERENCES Vendedor(id_vendedor),\n    FOREIGN KEY (id_carro) REFERENCES Carro(id_carro),\n    INDEX idx_fecha (fecha_venta),\n    INDEX idx_cliente (id_cliente),\n    INDEX idx_vendedor (id_vendedor)\n);\n\n-- Tabla: Venta_Metodo_Pago (3FN - relaci\u00f3n N:M para pagos m\u00faltiples)\nCREATE TABLE Venta_Metodo_Pago (\n    id_venta_pago INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL,\n    id_metodo INT NOT NULL,\n    monto DECIMAL(12,2) NOT NULL,\n    porcentaje DECIMAL(5,2),\n    fecha_pago DATE DEFAULT CURRENT_DATE,\n    referencia VARCHAR(50),\n    comprobante VARCHAR(100),\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta) ON DELETE CASCADE,\n    FOREIGN KEY (id_metodo) REFERENCES Metodo_Pago(id_metodo),\n    INDEX idx_venta (id_venta)\n);\n\n\n-- ENTIDADES DE FINANCIAMIENTO\n\n\n-- Tabla: Banco (3FN)\nCREATE TABLE Banco (\n    id_banco INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_banco VARCHAR(100) NOT NULL UNIQUE,\n    tasa_interes_minima DECIMAL(5,2) NOT NULL,\n    tasa_interes_maxima DECIMAL(5,2) NOT NULL,\n    plazo_minimo_meses INT NOT NULL,\n    plazo_maximo_meses INT NOT NULL,\n    requiere_inicial BOOLEAN DEFAULT TRUE,\n    porcentaje_inicial_minimo DECIMAL(5,2) DEFAULT 0.00\n);\n\n-- Tabla: Financiamiento (3FN)\nCREATE TABLE Financiamiento (\n    id_financiamiento INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL UNIQUE,\n    id_banco INT NOT NULL,\n    monto_total_carro DECIMAL(12,2) NOT NULL,\n    inicial_pagado DECIMAL(12,2) NOT NULL,\n    monto_financiado DECIMAL(12,2) NOT NULL,\n    tasa_interes DECIMAL(5,2) NOT NULL,\n    plazo_meses INT NOT NULL,\n    cuota_mensual DECIMAL(12,2) NOT NULL,\n    fecha_solicitud DATE DEFAULT CURRENT_DATE,\n    fecha_aprobacion DATE,\n    estado VARCHAR(20) DEFAULT 'PENDIENTE',\n    numero_credito VARCHAR(50),\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta) ON DELETE CASCADE,\n    FOREIGN KEY (id_banco) REFERENCES Banco(id_banco),\n    CHECK (estado IN ('PENDIENTE', 'APROBADO', 'RECHAZADO', 'CANCELADO')),\n    INDEX idx_estado (estado)\n);\n\n\n-- ENTIDADES DE ACCESORIOS\n\n\n-- Tabla: Accesorio (3FN)\nCREATE TABLE Accesorio (\n    id_accesorio INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_accesorio VARCHAR(100) NOT NULL UNIQUE,\n    descripcion TEXT,\n    precio_base DECIMAL(10,2) NOT NULL,\n    costo_proveedor DECIMAL(10,2) NOT NULL,\n    stock INT DEFAULT 0,\n    stock_minimo INT DEFAULT 0,\n    activo BOOLEAN DEFAULT TRUE,\n    categoria VARCHAR(50),\n    INDEX idx_categoria (categoria),\n    INDEX idx_stock (stock)\n);\n\n-- Tabla: Venta_Accesorios (3FN - relaci\u00f3n N:M)\nCREATE TABLE Venta_Accesorios (\n    id_venta_accesorio INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL,\n    id_accesorio INT NOT NULL,\n    cantidad INT NOT NULL DEFAULT 1,\n    precio_unitario DECIMAL(10,2) NOT NULL,\n    descuento_porcentaje DECIMAL(5,2) DEFAULT 0.00,\n    subtotal DECIMAL(10,2) NOT NULL,\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta) ON DELETE CASCADE,\n    FOREIGN KEY (id_accesorio) REFERENCES Accesorio(id_accesorio),\n    INDEX idx_venta (id_venta)\n\n\n-- ENTIDADES DE SERVICIOS POSTVENTA\n\n\n-- Tabla: Tipo_Servicio (3FN)\nCREATE TABLE Tipo_Servicio (\n    id_tipo_servicio INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_servicio VARCHAR(50) NOT NULL UNIQUE,\n    descripcion VARCHAR(200),\n    es_garantia BOOLEAN DEFAULT FALSE,\n    costo_base DECIMAL(10,2) DEFAULT 0.00\n);\n\n-- Tabla: Servicio_Postventa (3FN)\nCREATE TABLE Servicio_Postventa (\n    id_servicio INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL,\n    id_tipo_servicio INT NOT NULL,\n    fecha_servicio DATE DEFAULT CURRENT_DATE,\n    kilometraje_actual INT,\n    descripcion TEXT,\n    costo DECIMAL(10,2) NOT NULL,\n    proximo_servicio_fecha DATE,\n    proximo_servicio_km INT,\n    mecanico_asignado VARCHAR(100),\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta),\n    FOREIGN KEY (id_tipo_servicio) REFERENCES Tipo_Servicio(id_tipo_servicio),\n    INDEX idx_venta (id_venta),\n    INDEX idx_fecha (fecha_servicio)\n);\n\n\n-- TRIGGERS Y PROCEDIMIENTOS ALMACENADOS\n\n\n-- Trigger: Actualizar disponibilidad del carro al vender\nDELIMITER //\nCREATE TRIGGER trg_venta_actualizar_disponibilidad\nAFTER INSERT ON Venta\nFOR EACH ROW\nBEGIN\n    UPDATE Carro \n    SET disponible = FALSE \n    WHERE id_carro = NEW.id_carro;\nEND//\nDELIMITER ;\n\n-- Trigger: Registrar historial de precios\nDELIMITER //\nCREATE TRIGGER trg_historial_precio\nAFTER UPDATE ON Carro\nFOR EACH ROW\nBEGIN\n    IF OLD.precio != NEW.precio THEN\n        INSERT INTO Historial_Precio_Carro (\n            id_carro, \n            precio_anterior, \n            precio_nuevo, \n            porcentaje_cambio\n        ) VALUES (\n            NEW.id_carro,\n            OLD.precio,\n            NEW.precio,\n            ((NEW.precio - OLD.precio) / OLD.precio * 100)\n        );\n    END IF;\nEND//\nDELIMITER ;\n\n-- \u00cdNDICES ADICIONALES PARA OPTIMIZACI\u00d3N\n\n\nCREATE INDEX idx_venta_fecha_vendedor ON Venta(fecha_venta, id_vendedor);\nCREATE INDEX idx_carro_precio ON Carro(precio);\nCREATE INDEX idx_modelo_marca ON Modelo(id_marca);\nCREATE INDEX idx_financiamiento_banco ON Financiamiento(id_banco);\n\n\n-- VISTAS \u00daTILES\n\n\n-- Vista: Inventario completo de carros\nCREATE VIEW vista_inventario_carros AS\nSELECT \n    c.id_carro,\n    c.vin,\n    m.nombre_marca,\n    mo.nombre_modelo,\n    tv.nombre_tipo,\n    tc.nombre_combustible,\n    c.a\u00f1o,\n    c.color,\n    c.kilometraje,\n    c.precio,\n    ec.nombre_estado,\n    c.disponible,\n    co.nombre AS concesionario\nFROM Carro c\nINNER JOIN Modelo mo ON c.id_modelo = mo.id_modelo\nINNER JOIN Marca m ON mo.id_marca = m.id_marca\nINNER JOIN Tipo_Vehiculo tv ON mo.id_tipo = tv.id_tipo\nINNER JOIN Tipo_Combustible tc ON mo.id_combustible = tc.id_combustible\nINNER JOIN Estado_Carro ec ON c.id_estado = ec.id_estado\nINNER JOIN Concesionario co ON c.id_concesionario = co.id_concesionario;\n\n-- Vista: Ventas detalladas\nCREATE VIEW vista_ventas_detalladas AS\nSELECT \n    v.id_venta,\n    v.fecha_venta,\n    CONCAT(cl.nombre, ' ', cl.apellido) AS cliente,\n    CONCAT(ve.nombre, ' ', ve.apellido) AS vendedor,\n    m.nombre_marca,\n    mo.nombre_modelo,\n    c.a\u00f1o,\n    v.precio_carro,\n    v.descuento_aplicado,\n    v.total_accesorios,\n    v.precio_final,\n    v.tiene_financiamiento\nFROM Venta v\nINNER JOIN Cliente cl ON v.id_cliente = cl.id_cliente\nINNER JOIN Vendedor ve ON v.id_vendedor = ve.id_vendedor\nINNER JOIN Carro c ON v.id_carro = c.id_carro\nINNER JOIN Modelo mo ON c.id_modelo = mo.id_modelo\nINNER JOIN Marca m ON mo.id_marca = m.id_marca;\n\n"
        },
        {
            "x": 60,
            "y": 140,
            "height": 407,
            "width": 1053,
            "color": "yellow",
            "title": "DB ",
            "text": "\n-- CAT\u00c1LOGOS Y ENTIDADES BASE (1FN, 2FN, 3FN)\n\n\n-- Tabla: Marca\nCREATE TABLE Marca (\n    id_marca INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_marca VARCHAR(50) NOT NULL UNIQUE,\n    pais_origen VARCHAR(50),\n    sitio_web VARCHAR(100)\n);\n\n-- Tabla: Tipo_Vehiculo\nCREATE TABLE Tipo_Vehiculo (\n    id_tipo INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_tipo VARCHAR(30) NOT NULL UNIQUE,\n    descripcion VARCHAR(200)\n);\n\n-- Tabla: Tipo_Combustible\nCREATE TABLE Tipo_Combustible (\n    id_combustible INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_combustible VARCHAR(20) NOT NULL UNIQUE,\n    descripcion VARCHAR(100),\n    es_ecologico BOOLEAN DEFAULT FALSE\n);\n\n-- Tabla: Modelo (2FN)\nCREATE TABLE Modelo (\n    id_modelo INT PRIMARY KEY AUTO_INCREMENT,\n    id_marca INT NOT NULL,\n    id_tipo INT NOT NULL,\n    id_combustible INT NOT NULL,\n    nombre_modelo VARCHAR(50) NOT NULL,\n    capacidad_pasajeros INT,\n    a\u00f1o_inicio_produccion INT,\n    a\u00f1o_fin_produccion INT,\n    FOREIGN KEY (id_marca) REFERENCES Marca(id_marca),\n    FOREIGN KEY (id_tipo) REFERENCES Tipo_Vehiculo(id_tipo),\n    FOREIGN KEY (id_combustible) REFERENCES Tipo_Combustible(id_combustible),\n    UNIQUE KEY (id_marca, nombre_modelo)\n);\n\n-- Tabla: Color (3FN)\nCREATE TABLE Color (\n    id_color INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_color VARCHAR(30) NOT NULL UNIQUE,\n    codigo_hex VARCHAR(7),\n    es_metalizado BOOLEAN DEFAULT FALSE,\n    costo_adicional DECIMAL(10,2) DEFAULT 0.00\n);\n\n-- Tabla: Estado_Carro (3FN)\nCREATE TABLE Estado_Carro (\n    id_estado INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_estado VARCHAR(20) NOT NULL UNIQUE,\n    descripcion VARCHAR(100)\n);\n\n-- Tabla: Cliente (3FN)\nCREATE TABLE Cliente (\n    id_cliente INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(50) NOT NULL,\n    apellido VARCHAR(50) NOT NULL,\n    dni VARCHAR(20) NOT NULL UNIQUE,\n    telefono VARCHAR(15),\n    email VARCHAR(100) UNIQUE,\n    fecha_registro DATE DEFAULT CURRENT_DATE,\n    INDEX idx_dni (dni),\n    INDEX idx_email (email)\n);\n\n-- Tabla: Cliente_Direccion (3FN)\nCREATE TABLE Cliente_Direccion (\n    id_direccion INT PRIMARY KEY AUTO_INCREMENT,\n    id_cliente INT NOT NULL,\n    tipo_via VARCHAR(20),\n    numero_via VARCHAR(10),\n    numero_predio VARCHAR(10),\n    complemento VARCHAR(50),\n    barrio VARCHAR(50),\n    ciudad VARCHAR(50) NOT NULL,\n    departamento VARCHAR(50) NOT NULL,\n    codigo_postal VARCHAR(10),\n    es_principal BOOLEAN DEFAULT FALSE,\n    FOREIGN KEY (id_cliente) REFERENCES Cliente(id_cliente) ON DELETE CASCADE,\n    INDEX idx_cliente (id_cliente)\n);\n\n-- Tabla: Vendedor (3FN)\nCREATE TABLE Vendedor (\n    id_vendedor INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(50) NOT NULL,\n    apellido VARCHAR(50) NOT NULL,\n    dni VARCHAR(20) NOT NULL UNIQUE,\n    telefono VARCHAR(15),\n    email VARCHAR(100) UNIQUE,\n    fecha_contratacion DATE DEFAULT CURRENT_DATE,\n    comision_porcentaje DECIMAL(5,2) DEFAULT 0.00,\n    estado VARCHAR(10) DEFAULT 'ACTIVO',\n    CHECK (estado IN ('ACTIVO', 'INACTIVO', 'SUSPENDIDO')),\n    INDEX idx_estado (estado)\n);\n\n-- Tabla: Concesionario (3FN)\nCREATE TABLE Concesionario (\n    id_concesionario INT PRIMARY KEY AUTO_INCREMENT,\n    nombre VARCHAR(100) NOT NULL UNIQUE,\n    ciudad VARCHAR(50) NOT NULL,\n    telefono VARCHAR(15),\n    gerente VARCHAR(100),\n    email VARCHAR(100)\n);\n\n-- Tabla: Concesionario_Direccion (3FN)\nCREATE TABLE Concesionario_Direccion (\n    id_direccion INT PRIMARY KEY AUTO_INCREMENT,\n    id_concesionario INT NOT NULL,\n    tipo_via VARCHAR(20),\n    numero_via VARCHAR(10),\n    numero_predio VARCHAR(10),\n    barrio VARCHAR(50),\n    ciudad VARCHAR(50) NOT NULL,\n    departamento VARCHAR(50) NOT NULL,\n    referencia VARCHAR(200),\n    FOREIGN KEY (id_concesionario) REFERENCES Concesionario(id_concesionario) ON DELETE CASCADE\n);\n\n-- Tabla: Carro (3FN)\nCREATE TABLE Carro (\n    id_carro INT PRIMARY KEY AUTO_INCREMENT,\n    vin VARCHAR(17) NOT NULL UNIQUE,\n    id_modelo INT NOT NULL,\n    id_concesionario INT NOT NULL,\n    id_estado INT NOT NULL,\n    a\u00f1o INT NOT NULL,\n    color VARCHAR(30) NOT NULL,\n    kilometraje INT DEFAULT 0,\n    precio DECIMAL(12,2) NOT NULL,\n    fecha_ingreso DATE DEFAULT CURRENT_DATE,\n    disponible BOOLEAN DEFAULT TRUE,\n    FOREIGN KEY (id_modelo) REFERENCES Modelo(id_modelo),\n    FOREIGN KEY (id_concesionario) REFERENCES Concesionario(id_concesionario),\n    FOREIGN KEY (id_estado) REFERENCES Estado_Carro(id_estado),\n    INDEX idx_vin (vin),\n    INDEX idx_disponible (disponible),\n    INDEX idx_modelo (id_modelo)\n);\n\n-- Tabla: Historial_Precio_Carro (3FN - auditor\u00eda)\nCREATE TABLE Historial_Precio_Carro (\n    id_historial INT PRIMARY KEY AUTO_INCREMENT,\n    id_carro INT NOT NULL,\n    precio_anterior DECIMAL(12,2) NOT NULL,\n    precio_nuevo DECIMAL(12,2) NOT NULL,\n    fecha_cambio DATETIME DEFAULT CURRENT_TIMESTAMP,\n    motivo VARCHAR(200),\n    usuario VARCHAR(50),\n    porcentaje_cambio DECIMAL(6,2),\n    FOREIGN KEY (id_carro) REFERENCES Carro(id_carro) ON DELETE CASCADE,\n    INDEX idx_carro_fecha (id_carro, fecha_cambio)\n);\n\n-- Tabla: Metodo_Pago (3FN)\nCREATE TABLE Metodo_Pago (\n    id_metodo INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_metodo VARCHAR(30) NOT NULL UNIQUE,\n    requiere_aprobacion BOOLEAN DEFAULT FALSE,\n    activo BOOLEAN DEFAULT TRUE\n);\n\n-- Tabla: Venta (3FN)\nCREATE TABLE Venta (\n    id_venta INT PRIMARY KEY AUTO_INCREMENT,\n    id_cliente INT NOT NULL,\n    id_vendedor INT NOT NULL,\n    id_carro INT NOT NULL,\n    fecha_venta DATE DEFAULT CURRENT_DATE,\n    precio_carro DECIMAL(12,2) NOT NULL,\n    descuento_aplicado DECIMAL(12,2) DEFAULT 0.00,\n    total_accesorios DECIMAL(12,2) DEFAULT 0.00,\n    precio_final DECIMAL(12,2) NOT NULL,\n    tiene_financiamiento BOOLEAN DEFAULT FALSE,\n    observaciones TEXT,\n    FOREIGN KEY (id_cliente) REFERENCES Cliente(id_cliente),\n    FOREIGN KEY (id_vendedor) REFERENCES Vendedor(id_vendedor),\n    FOREIGN KEY (id_carro) REFERENCES Carro(id_carro),\n    INDEX idx_fecha (fecha_venta),\n    INDEX idx_cliente (id_cliente),\n    INDEX idx_vendedor (id_vendedor)\n);\n\n-- Tabla: Banco (3FN)\nCREATE TABLE Banco (\n    id_banco INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_banco VARCHAR(100) NOT NULL UNIQUE,\n    tasa_interes_minima DECIMAL(5,2) NOT NULL,\n    tasa_interes_maxima DECIMAL(5,2) NOT NULL,\n    plazo_minimo_meses INT NOT NULL,\n    plazo_maximo_meses INT NOT NULL,\n    requiere_inicial BOOLEAN DEFAULT TRUE,\n    porcentaje_inicial_minimo DECIMAL(5,2) DEFAULT 0.00\n);\n\n-- Tabla: Financiamiento (3FN)\nCREATE TABLE Financiamiento (\n    id_financiamiento INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL UNIQUE,\n    id_banco INT NOT NULL,\n    monto_total_carro DECIMAL(12,2) NOT NULL,\n    inicial_pagado DECIMAL(12,2) NOT NULL,\n    monto_financiado DECIMAL(12,2) NOT NULL,\n    tasa_interes DECIMAL(5,2) NOT NULL,\n    plazo_meses INT NOT NULL,\n    cuota_mensual DECIMAL(12,2) NOT NULL,\n    fecha_solicitud DATE DEFAULT CURRENT_DATE,\n    fecha_aprobacion DATE,\n    estado VARCHAR(20) DEFAULT 'PENDIENTE',\n    numero_credito VARCHAR(50),\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta) ON DELETE CASCADE,\n    FOREIGN KEY (id_banco) REFERENCES Banco(id_banco),\n    CHECK (estado IN ('PENDIENTE', 'APROBADO', 'RECHAZADO', 'CANCELADO')),\n    INDEX idx_estado (estado)\n);\n\n-- Tabla: Accesorio (3FN)\nCREATE TABLE Accesorio (\n    id_accesorio INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_accesorio VARCHAR(100) NOT NULL UNIQUE,\n    descripcion TEXT,\n    precio_base DECIMAL(10,2) NOT NULL,\n    costo_proveedor DECIMAL(10,2) NOT NULL,\n    stock INT DEFAULT 0,\n    stock_minimo INT DEFAULT 0,\n    activo BOOLEAN DEFAULT TRUE,\n    categoria VARCHAR(50),\n    INDEX idx_categoria (categoria),\n    INDEX idx_stock (stock)\n);\n\n-- Tabla: Venta_Accesorios (3FN)\nCREATE TABLE Venta_Accesorios (\n    id_venta_accesorio INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL,\n    id_accesorio INT NOT NULL,\n    cantidad INT NOT NULL DEFAULT 1,\n    precio_unitario DECIMAL(10,2) NOT NULL,\n    descuento_porcentaje DECIMAL(5,2) DEFAULT 0.00,\n    subtotal DECIMAL(10,2) NOT NULL,\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta) ON DELETE CASCADE,\n    FOREIGN KEY (id_accesorio) REFERENCES Accesorio(id_accesorio),\n    INDEX idx_venta (id_venta)\n);\n\n-- Tabla: Tipo_Servicio (3FN)\nCREATE TABLE Tipo_Servicio (\n    id_tipo_servicio INT PRIMARY KEY AUTO_INCREMENT,\n    nombre_servicio VARCHAR(50) NOT NULL UNIQUE,\n    descripcion VARCHAR(200),\n    es_garantia BOOLEAN DEFAULT FALSE,\n    costo_base DECIMAL(10,2) DEFAULT 0.00\n);\n\n-- Tabla: Servicio_Postventa (3FN)\nCREATE TABLE Servicio_Postventa (\n    id_servicio INT PRIMARY KEY AUTO_INCREMENT,\n    id_venta INT NOT NULL,\n    id_tipo_servicio INT NOT NULL,\n    fecha_servicio DATE DEFAULT CURRENT_DATE,\n    kilometraje_actual INT,\n    descripcion TEXT,\n    costo DECIMAL(10,2) NOT NULL,\n    proximo_servicio_fecha DATE,\n    proximo_servicio_km INT,\n    mecanico_asignado VARCHAR(100),\n    FOREIGN KEY (id_venta) REFERENCES Venta(id_venta),\n    FOREIGN KEY (id_tipo_servicio) REFERENCES Tipo_Servicio(id_tipo_servicio),\n    INDEX idx_venta (id_venta),\n    INDEX idx_fecha (fecha_servicio)\n);\n\n\n-- TRIGGERS Y PROCEDIMIENTOS ALMACENADOS\n\n\n-- Trigger: Actualizar disponibilidad del carro al vender\nDELIMITER //\nCREATE TRIGGER trg_venta_actualizar_disponibilidad\nAFTER INSERT ON Venta\nFOR EACH ROW\nBEGIN\n    UPDATE Carro\n    SET disponible = FALSE\n    WHERE id_carro = NEW.id_carro;\nEND//\nDELIMITER ;\n\n-- Trigger: Registrar historial de precios (MEJORADO)\nDELIMITER //\nCREATE TRIGGER trg_historial_precio\nAFTER UPDATE ON Carro\nFOR EACH ROW\nBEGIN\n    IF OLD.precio != NEW.precio THEN\n        INSERT INTO Historial_Precio_Carro (\n            id_carro,\n            precio_anterior,\n            precio_nuevo,\n            porcentaje_cambio,\n            fecha_cambio\n        ) VALUES (\n            NEW.id_carro,\n            OLD.precio,\n            NEW.precio,\n            ((NEW.precio - OLD.precio) / OLD.precio * 100),\n            NOW()\n        );\n    END IF;\nEND//\nDELIMITER ;\n\n\n-- \u00cdNDICES ADICIONALES PARA OPTIMIZACI\u00d3N\n\n\nCREATE INDEX idx_venta_fecha_vendedor ON Venta(fecha_venta, id_vendedor);\nCREATE INDEX idx_carro_precio ON Carro(precio);\nCREATE INDEX idx_modelo_marca ON Modelo(id_marca);\nCREATE INDEX idx_financiamiento_banco ON Financiamiento(id_banco);\n\n\n-- VISTAS \u00daTILES\n\n\n-- Vista: Inventario completo de carros\nCREATE VIEW vista_inventario_carros AS\nSELECT\n    c.id_carro,\n    c.vin,\n    m.nombre_marca,\n    mo.nombre_modelo,\n    tv.nombre_tipo,\n    tc.nombre_combustible,\n    c.a\u00f1o,\n    c.color,\n    c.kilometraje,\n    c.precio,\n    ec.nombre_estado,\n    c.disponible,\n    co.nombre AS concesionario\nFROM Carro c\nINNER JOIN Modelo mo ON c.id_modelo = mo.id_modelo\nINNER JOIN Marca m ON mo.id_marca = m.id_marca\nINNER JOIN Tipo_Vehiculo tv ON mo.id_tipo = tv.id_tipo\nINNER JOIN Tipo_Combustible tc ON mo.id_combustible = tc.id_combustible\nINNER JOIN Estado_Carro ec ON c.id_estado = ec.id_estado\nINNER JOIN Concesionario co ON c.id_concesionario = co.id_concesionario;\n\n-- Vista: Ventas detalladas\nCREATE VIEW vista_ventas_detalladas AS\nSELECT\n    v.id_venta,\n    v.fecha_venta,\n    CONCAT(cl.nombre, ' ', cl.apellido) AS cliente,\n    CONCAT(ve.nombre, ' ', ve.apellido) AS vendedor,\n    m.nombre_marca,\n    mo.nombre_modelo,\n    c.a\u00f1o,\n    v.precio_carro,\n    v.descuento_aplicado,\n    v.total_accesorios,\n    v.precio_final,\n    v.tiene_financiamiento\nFROM Venta v\nINNER JOIN Cliente cl ON v.id_cliente = cl.id_cliente\nINNER JOIN Vendedor ve ON v.id_vendedor = ve.id_vendedor\nINNER JOIN Carro c ON v.id_carro = c.id_carro\nINNER JOIN Modelo mo ON c.id_modelo = mo.id_modelo\nINNER JOIN Marca m ON mo.id_marca = m.id_marca;\n"
        }
    ]
}